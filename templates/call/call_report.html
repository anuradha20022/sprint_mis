{% extends 'base.html' %}
{%  block content_heading %}Call Report Master{% endblock %}
{%  block content_subheading %}Call Report Master {% endblock %}
{% block title %} Call Report Master{% endblock %}

{% block script %}
    <script>


        $('#call-report-details').DataTable({
            select: true,

            paging: true,
            lengthChange: true,
            "pageLength": 10,
            {#"lengthMenu": [[13, 25, 50, -1], [13, 25, 50, "All"]],#}
            searching: true,
            info: true, // bottom left info

             responsive: true,

             dom: 'Bfrtip',
              buttons: [ 'pageLength','excel'],
        {% if not call_report %}
            {#"deferRender": true,#}
            serverSide: true,
            processing: true,

            ajax: {
                url: "{% url 'call_reports' %}",
                type: "POST",
            },

            columns:[
                {data: "sno"},
                {#{data: "input"},#}
                {data: "emp_id"},
                {data: "name"},
                {data: "unique_id"},
                {data: "category"},
                {data: "ref_type"},
                {data: "design"},
                {data: "contact"},
                {data: "date"},
                {data: "time"},
                {data: "location"},
                {#{data: "city"},#}
                {#{data: "state"},#}
                {#{data: "pincode"},#}
                {#{data: "station"},#}
                {data: "branch"},
                {data: "source"},
                {data: "attendance"},
                {#{data: "type"},#}

            ],
        {% endif %}
        });
        {#$('#cus-responsive-datatable_wrapper').removeClass('dataTables_wrapper container-fluid dt-bootstrap4 no-footer');#}

    </script>
{% endblock %}

{% block body %}
        <style>

    .table td{
        {#font-size: 12px!important;#}
        padding: 5px!important;
    }

.table-responsive {
  display: block;
  width: 100%;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.table-responsive > .table-bordered {
  border: 0;
}
    .dataTables_wrapper {
        padding: 0!important;

    }

    </style>
    <form action="" method="POST" autocomplete="off">
 {% csrf_token %}
     <div class="row">
{#         <div class="col-md-3">#}
{#             <div class="form-group">#}
{#                 <input type="text" class="form-control" name="unique_id" id="callid_search" placeholder="Eg. 010215">#}
{#             </div>#}
{#         </div>#}
         <div class="col-md-4">
               <div class="form-group">
                <input type="text" name="date_d" class="form-control daterange-shawCalRanges">
               </div>
            </div>
          <div class="col-md-2">
             <button type="submit" name="Submit" class="btn btn-lg btn-success">Submit</button>
         </div>

     </div>

  </form>

{#    {% if call_report %}#}
    <div class="row">
     <div class="col-md-12">
     <div class="card card-body">

            <div class="table-responsive">
                <table id="call-report-details" class="table table-striped table-bordered" style="white-space: nowrap">
                    <thead>
                    <tr role="row" style="background: #3F51B5; color: #fff;" >
                        <th class="py-2" data-orderable="false">#</th>
                        <th class="py-2" data-orderable="false">Emp ID</th>
                        <th class="py-2" data-orderable="false">Emp Name</th>
                        <th class="py-2" data-orderable="false">Unique ID</th>
                        <th class="py-2" data-orderable="false">Category</th>
                        <th class="py-2" data-orderable="false">Referral Type</th>
                        <th class="py-2" data-orderable="false">Design</th>
                        <th class="py-2" data-orderable="false">Contact</th>
                        <th class="py-2" data-orderable="false">Date</th>
                        <th class="py-2" data-orderable="false">Time</th>
                        <th class="py-2">Location</th>
{#                        <th class="py-2">State</th>#}
{#                        <th class="py-2">Pincode</th>#}
{#                        <th class="py-2">Station</th>#}
                        <th class="py-2" data-orderable="false">Branch</th>
                        <th class="py-2" data-orderable="false">Source</th>
                        <th class="py-2" data-orderable="false">Attendance</th>
{#                        <th class="py-2">Type</th>#}
                    </tr>
                    </thead>
                    <tbody>
                    {% if call_report %}
                     {% for user in call_report %}

                        <tr>
                            <td class="py-1 text-right" >{{ forloop.counter }}</td>
                            <td class="py-1">{{ user.emp_id}}</td>
                            <td class="py-1">{{ user.name}}</td>
                            <td class="py-1">{{ user.unique_id}}</td>
                            <td class="py-1">{{ user.category}}</td>
                            <td class="py-1">{{ user.ref_type}}</td>
                            <td class="py-1">{{ user.design}}</td>
                            <td class="py-1">{{ user.contact}}</td>
                            <td class="py-1">{{ user.date}}</td>
                            <td class="py-1">{{ user.time}}</td>
                            <td class="py-1">{{ user.location}}</td>
{#                            <td class="py-1">{{ user.state}}</td>#}
{#                            <td class="py-1">{{ user.pincode}}</td>#}
{#                            <td class="py-1">{{ user.station}}</td>#}
                            <td class="py-1">{{ user.branch}}</td>
                            <td class="py-1">{{ user.source}}</td>
                            <td class="py-1">{{ user.attendance}}</td>
{#                            <td class="py-1">{{ user.type}}</td>#}
                        </tr>
                    {% endfor %}
                    {%  endif %}
                    </tbody>
                </table>

            </div>
     </div>
 </div>
    </div>
{# </div>#}
{#    {% else %}#}
{# <div class="col-md-12">#}
{#     <div class="card card-body">#}
{#            <div class="table-responsive">#}
{#                <table id="call-report-details" class="table table-striped table-bordered" style="white-space: nowrap">#}
{#                    <thead>#}
{#                    <tr role="row" style="background: grey; color: #fff;">#}
{#                        <th class="py-1">#</th>#}
{#                        <th class="py-2">Select</th>#}
{#                        <th class="py-1">Emp ID</th>#}
{#                        <th class="py-1">Unique ID</th>#}
{#                        <th class="py-1">Name</th>#}
{#                        <th class="py-1">Category</th>#}
{#                        <th class="py-1">Design</th>#}
{#                        <th class="py-1">Contact</th>#}
{#                        <th class="py-1">Date</th>#}
{#                        <th class="py-1">Time</th>#}
{#                        <th class="py-1">Area</th>#}
{#                        <th class="py-1">City</th>#}
{#                        <th class="py-1">State</th>#}
{#                        <th class="py-1">Pincode</th>#}
{#                        <th class="py-1">Station</th>#}
{#                        <th class="py-1">Branch</th>#}
{#                        <th class="py-1">Source</th>#}
{#                        <th class="py-1">Attendance</th>#}
{#                        <th class="py-1">Type</th>#}
{#                    </tr>#}
{#                    </thead>#}
{#                    <tbody>#}
{#                     {% for user in report %}#}
{##}
{#                        <tr>#}
{#                            <td class="py-1">{{ forloop.counter }}</td>#}
{#                            <td class="py-1">{{ user.emp_id}}</td>#}
{#                            <td class="py-1">{{ user.unique_id}}</td>#}
{#                            <td class="py-1">{{ user.name}}</td>#}
{#                            <td class="py-1">{{ user.category}}</td>#}
{#                            <td class="py-1">{{ user.design}}</td>#}
{#                            <td class="py-1">{{ user.contact}}</td>#}
{#                            <td class="py-1">{{ user.date}}</td>#}
{#                            <td class="py-1">{{ user.time}}</td>#}
{#                            <td class="py-1">{{ user.area}}</td>#}
{#                            <td class="py-1">{{ user.state}}</td>#}
{#                            <td class="py-1">{{ user.pincode}}</td>#}
{#                            <td class="py-1">{{ user.station}}</td>#}
{#                            <td class="py-1">{{ user.branch}}</td>#}
{#                            <td class="py-1">{{ user.source}}</td>#}
{#                            <td class="py-1">{{ user.attendance}}</td>#}
{#                            <td class="py-1">{{ user.type}}</td>#}
{#                        </tr>#}
{#                    {% endfor %}#}
{#                    </tbody>#}
{#                </table>#}
{#            </div>#}
{#     </div>#}
{# </div>#}
{#    {% endif %}#}
{% endblock %}