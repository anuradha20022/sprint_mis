{% extends 'base.html' %}
{%  block content_heading %}Map Report{% endblock %}
{%  block content_subheading %}Map Report{% endblock %}
{% block title %} Map Report {% endblock %}

{% block script %}
<script>
</script>

{% endblock %}

{% block body %}
    <style>
    /* Style the form - display items horizontally */
.form-inline {
  display: flex;
  flex-flow: row wrap;
  align-items: center;
}

/* Add some margins for each label */
.form-inline label {
  margin: 5px 10px 5px 0;
}

/* Style the input fields */
.form-inline input,select{
  vertical-align: middle;
  margin: 5px 10px 5px 0;
  padding: 10px;
  background-color: #fff;
  border: 1px solid #ddd;
}

/* Style the submit button */
.form-inline button {
  padding: 10px 20px;
  background-color: dodgerblue;
  border: 1px solid #ddd;
  color: white;
}

.form-inline button:hover {
  background-color: royalblue;
}

/* Add responsiveness - display the form controls vertically instead of horizontally on screens that are less than 800px wide */
@media (max-width: 800px) {
  .form-inline input {
    margin: 10px 0;
  }

  .form-inline {
    flex-direction: column;
    align-items: stretch;
  }
}
#mytitle,#submit {
  font-family: Arial, Helvetica, sans-serif;
}
#customers {
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  width: 100%;
}

#customers td, #customers th {
      font-family: Arial, Helvetica, sans-serif;
  border: 1px solid #ddd;
  padding: 8px;
}

#customers tr:nth-child(even){background-color: #f2f2f2;}

#customers tr:hover {background-color: #ddd}

#customers th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  background-color: #1268b2;
  color: white;
}
    </style>
    <form action="" method="post">
    {% csrf_token %}
        <div class="row">
            <div class="col-md-3">
                    <div class="form-group">
                        <select class="form-control" name="branch" required>
                            <option value="" selected disabled>-- Select Branch --</option>
                            <option value="All" >All</option>
                            {% for list in branch %}
                                <option value="{{ list.branch_name }}">{{ list.branch_name }}</option>
                            {% endfor %}
                        </select>
                    </div>
            </div>
            <div class="col-md-3">
                <input type="date" name="date" class="form-control" required>
            </div>
            <div class="col-md-2">
                <button type="submit" name="Submit" class="btn btn-lg btn-primary btn-gradient btn-shadow">Submit</button>
            </div>
        </div>
    </form>

            <div class="row pb-4">
                <div class="col-md-12">
                    <div class="card card-body">
                    <hr>
                        <div class="table-responsive">
                            <table id="report" class="table table-striped table-bordered datatable" style="white-space: nowrap">
                            <thead>
                            <tr role="row" style="background: #3F51B5; color: #fff;">
                                <th class="py-2">Employee ID</th>
                                <th class="py-2">Employee Name</th>
                                <th class="py-2">First Call Time</th>
                                <th class="py-2">No. of Calls</th>
                                <th class="py-2">Location</th>
                                <th class="py-2">View map</th>
                            </tr>
                            </thead>
                                <tbody>
                                   {% for item in result %}
                                       {% if item.TOTAL == 0 %}
                                           <tr>
                                              <td  class="py-1">{{ item.empid }}</td>
                                            <td  class="py-1">{{ item.name }}</td>
                                              <td style="text-align:center;" class="py-1">{{ item.MINTIME|time:'h:i:s'|default:'No Data' }}</td>
                                               <td style="text-align:center;" class="py-1">No Data</td>
                                               <td class="py-1">{{ item.branch }}</td>
                                               <td  class="py-1">
                                     <a href="{% url 'live_location' %}?empid={{ item.empid }}&date={{ item.date }}" target="_blank" style="color: #0d47a1; text-underline: #0d47a1">Live Status</a>
                                 </td>
                                    </tr>
                                       {% else %}
                                <tr>
                                    <td class="py-1">{{ item.empid }}</td>
                                    <td class="py-1">{{ item.name }}</td>
                                    <td class="py-1">{{ item.MINTIME|time:'h:i:s' }}</td>
                                    <td class="py-1">{{ item.TOTAL}}({{ item.doctor }} - Doctor, {{ item.RMP }}- RMP, {{ item.others }} - Others)</td>
                                    <td class="py-1">{{ item.branch }}</td>
                                    <td class="py-1">
                                         <a href="{% url 'live_location' %}?empid={{ item.empid }}&date={{ item.date }}" target="_blank" style="color: #0d47a1; text-underline: #0d47a1">Live Status</a>
                                     </td>
                                </tr>
                            {% endif %}
                            {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

            </div>

{% endblock %}